{ config, pkgs, ... }:

let
  hosts = import ../../hosts.nix;
in

{
  # ============================================================================
  # IMPORTS
  # ============================================================================

  imports = [
    ../common.nix
    ./hardware-configuration.nix
    ../../modules/dev/gitea.nix
  ];

  # ============================================================================
  # HOST IDENTIFICATION
  # ============================================================================

  networking.hostName = "frodo";
  users.motd = "You've found your way to the frodo server";

  # ============================================================================
  # SERVICES
  # ============================================================================

  fleet.dev.gitea = {
    enable = true;
    domain = hosts.frodo.ip;
    appName = "Fleet Git Repository";
  };

  # ============================================================================
  # NETWORKING & FIREWALL
  # ============================================================================

  networking.firewall.allowedTCPPorts = [];

  # ============================================================================
  # BOOTLOADER
  # ============================================================================

  boot.loader.grub.enable = true;
  boot.loader.grub.device = "/dev/vda";
  boot.loader.grub.useOSProber = true;

  # ============================================================================
  # SYSTEM
  # ============================================================================

  system.stateVersion = "25.05";
}
